<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="styles/normalize.css">
<link rel="stylesheet" href="styles/styles.css">
<title>Chat</title>
</head>
<body>
<!-- Start your code here -->
  <main>
    <section class="profile">
      <img src="images/profile_photo.jpg" class="profile-photo">
      <h1 class="profile-name">Chris Marina</h1>
      <h2 class="profile-info">Blogger</h2>
      <div class="profile-about">
        <div class="profile-about-city">
          <img src="images/location.png">
          <span>New-York</span>
        </div>
        <div class="profile-about-email">
          <img src="images/email.png">
          <span>chris@marina.com</span>
        </div>
        <div class="profile-about-birthday">
          <img src="images/cake.png">
          <span>23.04.1987</span>
        </div>
        <div class="profile-about-phone">
          <img src="images/phone.png">
          <span>+26559551559</span>
        </div> 
      </div>

    </section>
    <section class="chat">
    </section>
    <section class="contacts">
    </section>
  </main>
<!--
  <form action=''>
    <fieldset>
      <legend>Chat</legend>
      <label for="count_users">Users online</label>
      <output id="count_users"></output>
      <p></p>
      
      <label for="username">Username</label>
      <output id="username"></output>
     
      <p></p>
    
      <input id="textfield"/>
      
      <input type="button" value="Send" onClick="sendMessage()"/>
      
    </fieldset>
  </form>
  
  <form action='/changeName' method="get">
   <input type="submit" value="Изменить имя" />
   </form>
 
  <ul id="messages"></ul>
-->
</body>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io();

  function sendMessage(){
    //Отправляю сообщение, и имя отправившего
    socket.emit('chat message', document.getElementById('textfield').value, document.cookie.split('=')[1]);
    document.getElementById('textfield').value = "";
  }

  socket.on('chat message', function(message){

    console.log(message)

    let messageLine = document.createElement("li");

    let mess = document.createTextNode(message);

    messageLine.appendChild(mess);

    document.getElementById('messages').appendChild(messageLine);
  });

  socket.on('users online', function(usersOnline){

    document.getElementById("count_users").value = usersOnline;
  });

  document.getElementById("username").value = document.cookie.split('=')[1];


</script>
</html>